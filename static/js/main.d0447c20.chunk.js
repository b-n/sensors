(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){e.exports=n(282)},111:function(e,t,n){},279:function(e,t,n){},282:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(101),i=n.n(c),o=(n(111),n(20)),u={apiEndpoint:"https://bnb7g0g5g1.execute-api.eu-central-1.amazonaws.com/dev/thing/"},l=function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){fetch(u.apiEndpoint+e,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(e){return e.json()}).then(function(e){c(e)})},[]),r},m=n(8),s=n(105),d=n(102),f=n(21),p=n(1),b=n(19),j=n(56),O=n(55),h=function(e){var t=e.scale,n=e.transform,c=e.gridline,i=e.className,o=e.ticks,u=Object(a.useRef)(null);return Object(a.useEffect)(function(){Object(O.a)(u.current).call(Object(j.a)().scale(t).ticks(o))},[].concat(Object(b.a)(t.domain()),Object(b.a)(t.range()))),r.a.createElement(m.Group,{transform:n,className:i},c&&t.ticks(o).map(function(e){return r.a.createElement(m.Line,{key:e,x1:t(e),x2:t(e),y1:-c,y2:0,className:"gridline"})}),r.a.createElement("g",{ref:u}))},E=function(e){var t=e.scale,n=e.transform,c=e.gridline,i=e.className,o=e.ticks,u=Object(a.useRef)(null);return Object(a.useEffect)(function(){Object(O.a)(u.current).call(Object(j.b)().scale(t).ticks(o))},[].concat(Object(b.a)(t.domain()),Object(b.a)(t.range()))),r.a.createElement(m.Group,{transform:n,className:i},c&&t.ticks(o).filter(function(e,t){return 0!==t}).map(function(e,n){return r.a.createElement(m.Line,{key:e,x1:0,x2:c,y1:t(e),y2:t(e),className:"gridline"})}),r.a.createElement("g",{ref:u}))},g=(n(279),n(33)),w=function(e){var t=e.x,n=e.y,c=e.width,i=e.height,o=e.date,u=e.data,l=e.yScale,b=e.ppmColorScale,j=function(e){var t=e.from,n=e.to,r=e.width,c=Object(g.c)().domain([t,n]).range([0,r]);return Object(a.useEffect)(function(){c.range([0,r])},[r]),c}({width:c,from:Object(f.addHours)(o,0),to:Object(f.addHours)(o,24)}),O=l.domain()[0];return r.a.createElement(m.Group,{transform:{translate:[t,n]}},r.a.createElement(m.Text,{y:-2,x:5},Object(f.format)(o,"ddd\tDD\tMMM")),r.a.createElement(h,{scale:j,transform:{translate:[0,i]},gridline:i,className:"x-axis",ticks:p.b.every(2)}),r.a.createElement(E,{scale:l,gridline:c,className:"y-axis",ticks:7}),r.a.createElement(m.Group,{className:"plot"},r.a.createElement(d.Collection,{data:u,nodeEnter:function(e){return Object(s.a)({},e,{median:O,upper:O,lower:O})},animate:!0},function(e){return e.map(function(e){var t=e.key,n=e.date,c=e.median,i=e.lower,o=e.upper,u=j(new Date(n));return r.a.createElement(a.Fragment,{key:t},r.a.createElement(m.Line,{x1:u,x2:u,y1:l(i),y2:l(o)}),r.a.createElement(m.Circle,{cx:u,cy:l(c),r:3,fill:b(c),stroke:"grey",strokeWidth:"1px"}))})})))},v=n(2),y=n(104),x=function(e){var t=e.data,n=e.width,c=function(e){var t=e.data,n=e.interval,r=Object(a.useState)({min:0,max:0,data:[]}),c=Object(o.a)(r,2),i=c[0],u=c[1],l=60*n;return Object(a.useEffect)(function(){var e=[],n=Object.keys(t).map(function(n){var a=new Date(n+"T00:00:00"),r=t[n].reduce(function(e,t){var n=t.timestamp+Object(f.differenceInSeconds)(a,t.timestamp)%l*1e3;return e[n]||(e[n]=[]),e[n].push(t),e},{}),c=Object.keys(r).map(function(e){return{key:e,date:+e,mean:Object(v.mean)(r[e],function(e){return e.ppm}),max:Object(v.quantile)(r[e],1,function(e){return e.ppm}),upper:Object(v.quantile)(r[e],.75,function(e){return e.ppm}),median:Object(v.quantile)(r[e],.5,function(e){return e.ppm}),lower:Object(v.quantile)(r[e],.25,function(e){return e.ppm}),min:Object(v.quantile)(r[e],0,function(e){return e.ppm})}});return e.push.apply(e,Object(b.a)(Object(v.extent)(c,function(e){return e.mean}))),{date:n,data:c}}).sort(function(e,t){return e.date>=t.date?e.date>t.date?-1:0:1}),a=Object(v.extent)(e);u({min:a[0],max:a[1],data:n})},[t]),i}({data:t.data,interval:10}),i=30,u=50,l=30,s=i+0+200*c.data.length,d=function(e){var t=e.from,n=e.to,r=e.height,c=Object(g.a)().domain([t,n]).range([r,0]);return Object(a.useEffect)(function(){c.domain([t,n]).range([r,0])},[t,n,r]),c}({height:140,from:c.min,to:c.max}),p=function(e){var t=e.from,n=e.to,r=e.interpolator,c=Object(g.b)(r).domain([t,n]);return Object(a.useEffect)(function(){c.domain([t,n])},[t,n]),c}({interpolator:y.a,to:400,from:1200});return r.a.createElement(m.Svg,{height:s,width:n},c.data.length>0?c.data.map(function(e,t){return r.a.createElement(w,{x:u,y:200*t+i,width:n-u-l,height:140,key:e.date,date:e.date,data:e.data,yScale:d,ppmColorScale:p})}):null)},k=n(103),N=n.n(k),S=function(e){var t=l("breather"),n=function(){var e=Object(a.useState)(window.innerWidth),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){window.addEventListener("resize",N()(function(){r(window.innerWidth)},500))},[]),n}();return r.a.createElement("div",null,r.a.createElement("section",null,null!==t?r.a.createElement(x,{data:t,width:n}):null))},q=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(S,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[106,2,1]]]);
//# sourceMappingURL=main.d0447c20.chunk.js.map