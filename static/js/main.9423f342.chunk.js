(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){e.exports=n(280)},109:function(e,t,n){},277:function(e,t,n){},280:function(e,t,n){"use strict";n.r(t);var a=n(3),r=n.n(a),c=n(98),i=n.n(c),o=(n(109),n(12)),l={apiEndpoint:"https://bnb7g0g5g1.execute-api.eu-central-1.amazonaws.com/dev/thing/"},u=function(e){var t=Object(a.useState)(null),n=Object(o.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){fetch(l.apiEndpoint+e,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(e){return e.json()}).then(function(e){c(e)})},[]),r},m=n(7),s=n(103),d=n(99),f=n(13),p=function(e){var t=e.scale,n=e.transform,c=e.gridline,i=e.className,o=t.domain()[0],l=t.domain()[1],u=t.range()[1],s=new Array(Object(f.differenceInHours)(l,o)).fill(0).map(function(e,t){return Object(f.addHours)(o,t)}).concat(l);return r.a.createElement(m.Group,{transform:n,className:i},s.map(function(e,n){var i=t(e);return r.a.createElement(a.Fragment,{key:n},r.a.createElement(m.Line,{x1:i,x2:i,y1:0,y2:5,className:"tick"}),r.a.createElement(m.Text,{className:"tick-label",x:i,y:13,textAnchor:n>0?n<s.length-1?"middle":"end":"start"},Object(f.format)(e,"HH:mm")),void 0===c||0===n?null:r.a.createElement(m.Line,{x1:i,x2:i,y1:-c,y2:0,className:"gridline"}))}),r.a.createElement(m.Line,{x1:0,y1:0,x2:u,y2:0,stroke:"black",strokeWidth:1,className:"axis"}))},b=function(e){var t=e.scale,n=e.transform,c=e.gridline,i=e.className,o=t.domain(),l=o[0],u=o[1]-o[0],s=t.range();return r.a.createElement(m.Group,{transform:n,className:i},new Array(6).fill(0).map(function(e,n){var i=l+n*u/5|0,o=t(i);return r.a.createElement(a.Fragment,{key:n},r.a.createElement(m.Line,{x1:0,x2:-5,y1:o,y2:o,stroke:"black",strokeWidth:1,className:"tick"}),r.a.createElement(m.Text,{className:"tick-label",x:-7,y:o,textAnchor:"end",alignmentBaseline:"central"},i),void 0===c||0===n?null:r.a.createElement(m.Line,{x1:0,x2:c,y1:o,y2:o,className:"gridline"}))}),r.a.createElement(m.Line,{x1:0,x2:0,y1:s[0],y2:s[1],stroke:"black",strokeWidth:1}))},h=(n(277),n(32)),j=function(e){var t=e.x,n=e.y,c=e.width,i=e.height,l=e.date,u=e.data,j=e.yScale,E=e.ppmColorScale,O=function(e){var t=e.from,n=e.to,r=e.width,c=Object(a.useState)({scale:Object(h.c)().domain([t,n])}),i=Object(o.a)(c,2),l=i[0],u=i[1];return Object(a.useEffect)(function(){u({scale:l.scale.range([0,r])})},[r]),l.scale}({width:c,from:Object(f.addHours)(l,0),to:Object(f.addHours)(l,24)}),x=j.domain()[0];return console.log(x),r.a.createElement(m.Group,{transform:{translate:[t,n]}},r.a.createElement(m.Text,{y:-2,x:5},Object(f.format)(l,"ddd\tDD\tMMM")),r.a.createElement(p,{scale:O,transform:{translate:[0,i]},gridline:i,className:"x-axis"}),r.a.createElement(b,{scale:j,gridline:c,className:"y-axis"}),r.a.createElement(m.Group,{className:"plot"},r.a.createElement(d.Collection,{data:u,nodeEnter:function(e){return Object(s.a)({},e,{mean:x,upper:x,lower:x})},animate:!0},function(e){return e.map(function(e){var t=e.key,n=e.date,c=e.mean,i=e.lower,o=e.upper,l=O(new Date(n)),u=E(c);return r.a.createElement(a.Fragment,{key:t},r.a.createElement(m.Line,{x1:l,x2:l,y1:j(i),y2:j(o)}),r.a.createElement(m.Circle,{cx:l,cy:j(c),r:2,fill:u}))})})))},E=n(102),O=n(1),x=n(101),y=function(e){var t=e.data,n=e.width,c=function(e){var t=e.data,n=e.interval,r=Object(a.useState)({min:0,max:0,data:[]}),c=Object(o.a)(r,2),i=c[0],l=c[1],u=60*n;return Object(a.useEffect)(function(){var e=[],n=Object.keys(t).map(function(n){var a=new Date(n+"T00:00:00"),r=t[n].reduce(function(e,t){var n=t.timestamp+Object(f.differenceInSeconds)(a,t.timestamp)%u*1e3;return e[n]||(e[n]=[]),e[n].push(t),e},{}),c=Object.keys(r).map(function(e){return{key:e,date:+e,mean:Object(O.mean)(r[e],function(e){return e.ppm}),max:Object(O.quantile)(r[e],1,function(e){return e.ppm}),upper:Object(O.quantile)(r[e],.75,function(e){return e.ppm}),median:Object(O.quantile)(r[e],.5,function(e){return e.ppm}),lower:Object(O.quantile)(r[e],.25,function(e){return e.ppm}),min:Object(O.quantile)(r[e],0,function(e){return e.ppm})}});return e.push.apply(e,Object(E.a)(Object(O.extent)(c,function(e){return e.mean}))),{date:n,data:c}}).sort(function(e,t){return e.date>=t.date?e.date>t.date?-1:0:1}),a=Object(O.extent)(e);l({min:a[0],max:a[1],data:n})},[t]),i}({data:t.data,interval:10}),i=30,l=50,u=30,s=i+0+200*c.data.length,d=function(e){var t=e.from,n=e.to,r=e.height,c=Object(a.useState)({scale:Object(h.a)().domain([t,n])}),i=Object(o.a)(c,2),l=i[0],u=i[1];return Object(a.useEffect)(function(){u({scale:l.scale.domain([t,n]).range([r,0])})},[t,n,r]),l.scale}({height:140,from:c.min,to:c.max}),p=function(e){var t=e.from,n=e.to,r=e.interpolator,c=Object(a.useState)({scale:Object(h.b)(r).domain([t,n])}),i=Object(o.a)(c,2),l=i[0],u=i[1];return Object(a.useEffect)(function(){u({scale:l.scale.domain([t,n])})},[t,n]),l.scale}({interpolator:x.a,to:400,from:1200});return r.a.createElement(m.Svg,{height:s,width:n},c.data.length>0?c.data.map(function(e,t){return r.a.createElement(j,{x:l,y:200*t+i,width:n-l-u,height:140,key:e.date,date:e.date,data:e.data,yScale:d,ppmColorScale:p})}):null)},w=n(100),g=n.n(w),v=function(e){var t=u("breather"),n=function(){var e=Object(a.useState)(window.innerWidth),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){window.addEventListener("resize",g()(function(){r(window.innerWidth)},500))},[]),n}();return r.a.createElement("div",null,r.a.createElement("section",null,null!==t?r.a.createElement(y,{data:t,width:n}):null))},k=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[104,2,1]]]);
//# sourceMappingURL=main.9423f342.chunk.js.map