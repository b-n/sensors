(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports=n(296)},116:function(e,t,n){},284:function(e,t,n){},286:function(e,t,n){},296:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(105),c=n.n(i),o=(n(116),n(24)),l={apiEndpoint:"https://bnb7g0g5g1.execute-api.eu-central-1.amazonaws.com/dev/thing/",chromeCastAppId:"95A6E974"},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.fromDate,r=t.toDate,i=Object(a.useState)(null),c=Object(o.a)(i,2),m=c[0],s=c[1];return Object(a.useEffect)(function(){var t=new URL(e,l.apiEndpoint);n&&t.searchParams.append("fromDate",n),r&&t.searchParams.append("toDate",r),fetch(t,{method:"GET",headers:{"Content-Type":"application/json"},mode:"cors"}).then(function(e){return e.json()}).then(function(e){s(e)})},[n,r]),m},s=n(106),u=n.n(s),d=function(){var e=Object(a.useState)(window.innerWidth),t=Object(o.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)(function(){window.addEventListener("resize",u()(function(){r(window.innerWidth)},500))},[]),n},p=n(9),f=n(110),h=n(107),g=n(16),b=n(2),E=n(13),v=n(23),O=n(60),w=n(59),y=function(e){var t=e.scale,n=e.transform,i=e.gridline,c=e.className,o=e.ticks,l=e.tickFormat,m=Object(a.useRef)(null);return Object(a.useEffect)(function(){Object(w.a)(m.current).call(Object(O.a)().scale(t).ticks(o).tickFormat(l))},[].concat(Object(v.a)(t.domain()),Object(v.a)(t.range()))),r.a.createElement(p.Group,{transform:n,className:c},i&&t.ticks(o).map(function(e){return r.a.createElement(p.Line,{key:e,x1:t(e),x2:t(e),y1:-i,y2:0,className:"gridline"})}),r.a.createElement("g",{ref:m}))},j=function(e){var t=e.scale,n=e.transform,i=e.gridline,c=e.className,o=e.ticks,l=e.tickFormat,m=Object(a.useRef)(null);return Object(a.useEffect)(function(){Object(w.a)(m.current).call(Object(O.b)().scale(t).ticks(o).tickFormat(l))},[].concat(Object(v.a)(t.domain()),Object(v.a)(t.range()))),r.a.createElement(p.Group,{transform:n,className:c},i&&t.ticks(o).map(function(e,n){return r.a.createElement(p.Line,{key:e,x1:0,x2:i,y1:t(e),y2:t(e),className:"gridline"})}),r.a.createElement("g",{ref:m}))},k=(n(284),n(37)),x=function(e){var t=e.from,n=e.to,r=e.interpolator,i=Object(k.b)(r).domain([t,n]);return Object(a.useEffect)(function(){i.domain([t,n])},[t,n]),i},C=function(e){var t=e.transform,n=e.width,i=e.height,c=e.date,o=e.data,l=e.yScale,m=e.ppmColorScale,s=e.animate,u=function(e){var t=e.from,n=e.to,r=e.width,i=Object(k.c)().domain([t,n]).range([0,r]);return Object(a.useEffect)(function(){i.range([0,r])},[r]),i}({width:n,from:Object(g.addHours)(c,6),to:Object(g.addHours)(c,20)}),d=l.domain()[0],v="clip-".concat(c),O="url(#".concat(v,")");return r.a.createElement(p.Group,{transform:t},r.a.createElement(p.Text,{y:-2,x:5},Object(g.format)(c,"ddd\tDD\tMMM")),r.a.createElement(y,{scale:u,transform:{translate:[0,i]},gridline:i,className:"x-axis",ticks:b.b.every(1),tickFormat:Object(E.a)("%H:%M")}),r.a.createElement(j,{scale:l,gridline:n,className:"y-axis",ticks:7}),r.a.createElement(p.Group,{className:"plot"},r.a.createElement("clipPath",{id:v},r.a.createElement(p.Rect,{width:n,height:i})),r.a.createElement(h.Collection,{data:o,nodeEnter:function(e){return Object(f.a)({},e,{median:d,upper:d,lower:d})},animate:s},function(e){return e.map(function(e){var t=e.key,n=e.date,i=e.median,c=e.lower,o=e.upper,s=u(n);return r.a.createElement(a.Fragment,{key:t},r.a.createElement(p.Line,{x1:s,x2:s,y1:l(c),y2:l(o),clipPath:O}),r.a.createElement(p.Circle,{cx:s,cy:l(i),r:3,fill:m(i),stroke:"grey",strokeWidth:"1px",clipPath:O}))})})))},I=n(3),N=n(36),D=function(e){var t=e.data,n=e.width,i=e.animate,c=function(e){var t=e.data,n=e.interval,r=Object(a.useState)({min:0,max:0,data:[]}),i=Object(o.a)(r,2),c=i[0],l=i[1],m=60*n;return Object(a.useEffect)(function(){var e=[],n=Object.keys(t).map(function(n){var a=new Date(n+"T00:00:00"),r=t[n].reduce(function(e,t){var n=t.timestamp+Object(g.differenceInSeconds)(a,t.timestamp)%m*1e3;return e[n]||(e[n]=[]),e[n].push(t),e},{}),i=Object.keys(r).map(function(e){return r[e].sort(function(e,t){return e.ppm-t.ppm}),{key:e,date:+e,mean:Object(I.mean)(r[e],function(e){return e.ppm}),max:Object(I.quantile)(r[e],1,function(e){return e.ppm}),upper:Object(I.quantile)(r[e],.75,function(e){return e.ppm}),median:Object(I.quantile)(r[e],.5,function(e){return e.ppm}),lower:Object(I.quantile)(r[e],.25,function(e){return e.ppm}),min:Object(I.quantile)(r[e],0,function(e){return e.ppm})}});return e.push.apply(e,Object(v.a)(Object(I.extent)(i,function(e){return e.mean}))),{date:n,data:i}}).sort(function(e,t){return e.date>=t.date?e.date>t.date?-1:0:1}),a=Object(I.extent)(e);l({min:a[0],max:a[1],data:n})},[t]),c}({data:t.data,interval:10}),l=c.max-c.min,m=c.min,s=c.max,u=30,d=50,f={width:n-d-30,height:140},h=u+0+c.data.length*(f.height+60),b=function(e){var t=e.from,n=e.to,r=e.height,i=Object(k.a)().domain([t,n]).range([r,0]);return Object(a.useEffect)(function(){i.domain([t,n]).range([r,0])},[t,n,r]),i}({height:f.height,from:m-.03*l,to:s+.03*l}),E=x({interpolator:N.a,to:400,from:1200});return r.a.createElement(p.Svg,{height:h,width:n},c.data.length>0?c.data.map(function(e,t){return r.a.createElement(C,Object.assign({transform:{translate:[d,t*(f.height+60)+u]}},f,{key:e.date,date:e.date,data:e.data,yScale:b,ppmColorScale:E,animate:i}))}):null)},S=(n(286),function(e){var t=e.children;return r.a.createElement("table",{className:"info-legend"},r.a.createElement("tbody",null,t))}),R=function(e){var t=e.color,n=e.range,a=e.explanation;return r.a.createElement("tr",null,r.a.createElement("td",{className:"info-legend-range"},r.a.createElement("span",{className:"dot",style:{backgroundColor:t}}),n),r.a.createElement("td",{className:"info-legend-description"},a))},F=function(e){var t=e.onlySummary,n=x({interpolator:N.a,to:400,from:1200});return r.a.createElement("section",{className:"info-container"},r.a.createElement("h1",null,"Information"),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The graph to the left measures the average Carbon Dioxide (CO",r.a.createElement("sub",null,"2"),") concentration near the sensor in the office. The sensor reads the values in parts per million (ppm)."),r.a.createElement("p",null,"CO",r.a.createElement("sub",null,"2")," is a colorless gas with a density about 60% higher than that of dry air. The current global concentration is about 410 ppm, having risen from pre-industrial levels of 280 ppm. CO",r.a.createElement("sub",null,"2")," is produced by all aerobic organisms (things that breathe air) when they metabolize carbohydrates and lipids (fats etc) to produce energy by respiration."),r.a.createElement("p",null,"CO",r.a.createElement("sub",null,"2")," levels outside of buildings can range from 380-500ppm. At very high concentrations (10.000ppm), CO",r.a.createElement("sub",null,"2")," becomes toxic to animals. Raising the concentration to 10.000ppm for several hours will kill spider mites and whiteflies in a greenhouse.")),r.a.createElement("p",null,"A few studies have found linkages in increased CO",r.a.createElement("sub",null,"2"),"concentrations and an increase in impairment in cognitive abilities. Relative to 600 ppm, at 1.000 ppm CO",r.a.createElement("sub",null,"2"),", moderate and statistically significant decrements occurred in six of nine scales of decision-making performance",r.a.createElement("a",{href:"https://web.archive.org/web/20160305212909/http://ehp.niehs.nih.gov/wp-content/uploads/2012/09/ehp.1104789.pdf",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("sup",null,"[ref]")),". In a study of Volatile Organic Compound Exposure (VOC), of which CO",r.a.createElement("sub",null,"2"),"is one, average cognitive scores were 61% higher on the Green building day (~740ppm) and 101% higher on the two Green+ (~502ppm) building days than on the Conventional building day (~940ppm) ",r.a.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4892924/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("sup",null,"[ref]")),"."),r.a.createElement("h2",null,"Legend"),r.a.createElement(S,null,r.a.createElement(R,{color:n(500),range:"400-600",explanation:"Ideal"}),r.a.createElement(R,{color:n(700),range:"600-800",explanation:"Okay, mild cognitive impairment"}),r.a.createElement(R,{color:n(900),range:"800-1000",explanation:"Some cognitive impairment"}),r.a.createElement(R,{color:n(1100),range:"1000-1200",explanation:"Open some windows already"}),r.a.createElement(R,{color:n(1300),range:"1200+",explanation:"Illegal in South Netherlands (Belgium)"})),r.a.createElement("h2",null,"Data Info"),r.a.createElement("p",null,"Readings are taken every 1 minute from the device, and are comprised of average ppm over that 1 minute period. Values are summarised into 10 minute intervals, where the points represent the median value in that 10 minute1s. The black lines indicate the interquartile range (IQR) of the values in the 10 minute period to show the variablility in the readings."))},P=function(){!function(e){var t=e.appId;Object(a.useEffect)(function(){window.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:t,autoJoinPolicy:window.chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})},[])}({appId:l.chromeCastAppId});var e=m("breather"),t=d();return r.a.createElement(a.Fragment,null,r.a.createElement("section",null,null!==e?r.a.createElement(D,{data:e,width:.65*t,animate:!0}):null),r.a.createElement(F,{onlySummary:!1}))},G=function(){Object(a.useEffect)(function(){window.cast.framework.CastReceiverContext.getInstance().start()},[]);var e=Object(g.format)(Object(g.addDays)(new Date,-2),"YYYY-MM-DD"),t=m("breather",{fromDate:e}),n=d();return r.a.createElement(a.Fragment,null,r.a.createElement("section",null,null!==t?r.a.createElement(D,{data:t,width:.65*n,animate:!1}):null),r.a.createElement(F,{onlySummary:!0}))},T=n(298),A=n(299),M=n(108),q=n.n(M),L=function(e){return r.a.createElement(T.a,{basename:"/sensors"},r.a.createElement("div",null,r.a.createElement(A.a,{exact:!0,path:"/",render:function(e){var t=e.history,n=e.location;return void 0!==q.a.parse(n.search).reciever?(t.push("/reciever"),null):r.a.createElement(P,null)}}),r.a.createElement(A.a,{path:"/reciever",component:G})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[111,2,1]]]);
//# sourceMappingURL=main.f658c484.chunk.js.map